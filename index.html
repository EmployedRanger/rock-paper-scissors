<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    
    <script>
    // Rock Paper Scissors

    let choiceComputer;
    let choicePlayer;
    let playerScore = 0;
    let computerScore = 0;
    const MAX_ROUNDS = 5;

    function playRound() {
        choiceComputer = getComputerChoice();
        choicePlayer = getPlayerChoice();
        let roundWinner = determineWinner(choiceComputer, choicePlayer);
        round(roundWinner);
        score(roundWinner);
    }

        // Get computer choice function
    function getComputerChoice() {

        //  randomly choose value 1, 2, 3
        choiceComputer = Math.floor(Math.random() * 3) + 1;

        //  converts to 1, 2, 3 
        if (choiceComputer == 1) {
            choiceComputer = "rock";
        } else if (choiceComputer == 2) {
            choiceComputer = "scissors";
        } else {
            choiceComputer = "paper";
        }
    
        //  returns choice
        return choiceComputer;
    }
    
    // Get Player choice
    function getPlayerChoice() {

        //  prompt to get choice
        let choicePlayer = prompt("Rock, Paper, or Scissors?");
    
        // Change to lower case
        // choicePlayer = choicePlayer.toLowerCase();
        //  return choice
        return choicePlayer.toLowerCase();
    }

    // Check who wins - takes two values
    function determineWinner (choiceComputer, choicePlayer) {
        let roundWinner;

        // if statements
        if (choiceComputer == choicePlayer) {
            roundWinner = 2;
        } else if (choiceComputer == "paper" && choicePlayer == "rock") {
            roundWinner = 0;
        } else if (choiceComputer == "paper" && choicePlayer == "scissors") {
            roundWinner = 1;
        } else if (choiceComputer == "rock" && choicePlayer == "scissors") {
            roundWinner = 0;
        } else if (choiceComputer == "rock" && choicePlayer == "paper") {
            roundWinner = 1;
        } else if (choiceComputer == "scissors" && choicePlayer == "paper") {
            roundWinner = 0;
        } else if (choiceComputer == "scissors" && choicePlayer == "rock") {
            roundWinner = 1;
        } else {}

        return roundWinner;
    }

    function round(roundWinner) {
        if (roundWinner == 0) {
            console.log('Computer wins this round!');
        } else if (roundWinner == 1){
            console.log('You win this round!');
        } else if (roundWinner == 2) {
            console.log('It is a tie! Try again!')
        } else {
            console.log('Something went horribly wrong!');
        }
    }

    function score(roundWinner) {
        if (roundWinner == 0) {
            ++computerScore;
            console.log("Player score is: " + playerScore);
            console.log("Computer score is: " + computerScore);
        } else if (roundWinner == 1) {
            ++playerScore;
            console.log("Player score is: " + playerScore);
            console.log("Computer score is: " + computerScore);
        } else {

        }

        game(computerScore, playerScore);
    }

    function game (computerScore, playerScore) {
        while (playerScore < MAX_ROUNDS && computerScore < MAX_ROUNDS) {
            let roundWinner;

            // Plays round and records score
            playRound();
            if (roundWinner == 0) {
                ++computerScore;
            } else if (roundWinner == 1) {
                ++playerScore;
            } else {
            }
        }
        if (playerScore >= MAX_ROUNDS) {
            console.log("Congrats! You win the game!");
            return;
        } else if (computerScore >= MAX_ROUNDS) {
            console.log("Computer won this game!");
            return;
            }
    }

    game(computerScore, playerScore);

    </script>
</body>
</html>